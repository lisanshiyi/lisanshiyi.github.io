(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{383:function(s,a,t){"use strict";t.r(a);var r=t(7),e=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("大家好，我是"),a("code",[s._v("三十一")]),a("sup",[s._v("[0]")]),s._v("，最近北京也出现疫情了，昨晚公司大楼临时管控，测核酸折腾到小一点才到家。前两天的抢菜、囤菜，加上这次的管控经历，这次真有些慌了。。。")]),s._v(" "),a("p",[s._v("本次分享的内容比较简单，主要是对日常工作使用 GPU 的常用命令做一个简单的总结，阅读全文预计花费 11 分钟，如果有缺失号友们可以私信我补充（划重点），如果对你有帮助，也欢迎号友们点赞收藏。")]),s._v(" "),a("h2",{attrs:{id:"nvidia-smi-简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nvidia-smi-简介"}},[s._v("#")]),s._v(" nvidia-smi 简介")]),s._v(" "),a("p",[s._v("NVIDIA 系统管理界面（nvidia-smi）是基于 "),a("code",[s._v("NVIDIA Management Library（NVML）")]),a("sup",[s._v("[1]")]),s._v("的命令行实用程序，旨在帮助管理和监视 NVIDIA GPU 设备。")]),s._v(" "),a("h2",{attrs:{id:"gpu-参数查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gpu-参数查看"}},[s._v("#")]),s._v(" GPU 参数查看")]),s._v(" "),a("h3",{attrs:{id:"一、查看-gpu-运行情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、查看-gpu-运行情况"}},[s._v("#")]),s._v(" 一、查看 GPU 运行情况")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("nvidia-smi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Sun Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" 02:40:38 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("\n+-----------------------------------------------------------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" NVIDIA-SMI "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("418.56")]),s._v("       Driver Version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("418.56")]),s._v("       CUDA Version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-------------------------------+----------------------+----------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" GPU  Name        Persistence-M"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Bus-Id        Disp.A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Volatile Uncorr. ECC "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Fan  Temp  Perf  Pwr:Usage/Cap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         Memory-Usage "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" GPU-Util  Compute M. "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  GeForce GTX "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("108")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".  On   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 00000000:02:00.0 Off "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  N/A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("%   29C    P8     9W / 250W "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    611MiB / 11178MiB "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%      Default "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-------------------------------+----------------------+----------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  GeForce GTX "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("108")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".  On   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 00000000:03:00.0 Off "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  N/A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("%   30C    P8     9W / 250W "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      0MiB / 11178MiB "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%      Default "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-------------------------------+----------------------+----------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  GeForce GTX "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("108")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".  On   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 00000000:82:00.0 Off "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  N/A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("%   30C    P8     9W / 250W "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      0MiB / 11178MiB "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%      Default "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-------------------------------+----------------------+----------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  GeForce GTX "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("108")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".  On   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 00000000:83:00.0 Off "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  N/A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("%   30C    P8     9W / 250W "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      0MiB / 11178MiB "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%      Default "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Processes:                                                       GPU Memory "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  GPU       PID   Type   Process name                             Usage      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("33777")]),s._v("      C   /usr/bin/python                              601MiB "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-----------------------------------------------------------------------------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("p",[s._v("以上是"),a("code",[s._v("GEFORCE GTX 1080 Ti")]),s._v(" GPU 服务器的运行信息。")]),s._v(" "),a("ul",[a("li",[s._v("第一行分别为：命令行工具版本、GPU驱动版本、CUDA版本")]),s._v(" "),a("li",[s._v("第一栏分别为：GPU(GPU卡号，0～4)、Fan(风扇转速，0～100%)")]),s._v(" "),a("li",[s._v("第二栏分别为：Name(显卡名字)、Temp(温度，摄氏度)")]),s._v(" "),a("li",[s._v("第三栏分别为：Perf(性能状态，P0~P12，最高性能为P0，最低性能为P12)")]),s._v(" "),a("li",[s._v("第四栏分别为：Persistence-M(持续模式，默认为关闭，比较节能，如果设置成ON，耗能比较大，但新的GPU应用启动时，花费的时间会更短)、Pwr:Usage/Cap(能耗)")]),s._v(" "),a("li",[s._v("第五栏分别为：Bus-Id(GPU总线，domain🚌device.function)")]),s._v(" "),a("li",[s._v("第六栏分别为：Disp.A(GPU的显示是否初始化)、Memory-Usage(显存利用率)")]),s._v(" "),a("li",[s._v("第七栏分别为：Volatile GPU-Util(GPU浮动利用率)")]),s._v(" "),a("li",[s._v("第八栏分别为：Uncorr. ECC(Error Correcting Code错误检查和纠正码)、Compute M.(计算模式)")]),s._v(" "),a("li",[s._v("下面一张表为：每个GPU Processes的资源占用情况")])]),s._v(" "),a("p",[a("strong",[s._v("注")]),s._v("：显存占用和 GPU 占用是两个不一样的，显卡是由 GPU 和显存等组成的，显存和 GPU 的关系可简单理解为内存和 CPU 的关系。")]),s._v(" "),a("p",[s._v("当然我们也可以每秒刷新查询一次，实现实时监控查询显卡状态效果")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" nvidia-smi\n\n或\n\nnvidia-smi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"二、查询所有-gpu-的当前详细信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、查询所有-gpu-的当前详细信息"}},[s._v("#")]),s._v(" 二、查询所有 GPU 的当前详细信息")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("nvidia-smi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("也可以单独过滤第 N 卡 的 GPU 信息")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("nvidia-smi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("或者单独过滤当前的 GPU 时钟相关信息")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("nvidia-smi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" CLOCK\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("或者单独过滤每个 GPU 的可用时钟频率信息")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("nvidia-smi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" SUPPORTED_CLOCKS\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"三、获取-gpu-id-信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、获取-gpu-id-信息"}},[s._v("#")]),s._v(" 三、获取 GPU ID 信息")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("nvidia-smi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("从左到右分别为：GPU卡号、GPU型号、GPU物理UUID号")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("GPU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(": GeForce GTX "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),s._v(" Ti "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UUID: GPU-5da6e67e-fd5a-88fb-7a0e-109c3284f7bf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nGPU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": GeForce GTX "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),s._v(" Ti "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UUID: GPU-ce9189e4-2e58-3a19-4332-cb5c7fac1aa6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nGPU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": GeForce GTX "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),s._v(" Ti "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UUID: GPU-242b3020-8e5c-813a-42d9-475766d52f9d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nGPU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": GeForce GTX "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),s._v(" Ti "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UUID: GPU-8f3d825f-7246-3daf-eaa1-37845b03aa03"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("可以单独过滤出 GPU 卡号信息")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("nvidia-smi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"nvidia-docker-运行相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nvidia-docker-运行相关"}},[s._v("#")]),s._v(" NVIDIA Docker 运行相关")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--runtime")]),s._v(" nvidia "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NVIDIA_VISIBLE_DEVICES")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("GPU-5da6e67e-fd5a-88fb-7a0e-109c3284f7bf "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v(":8000 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /www/models:/www/models "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("项目/服务:v1.0."),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("--runtime nvidia：指定 NVIDIA GPU 驱动运行运行，只针对 GPU 机器生效。")]),s._v(" "),a("li",[s._v("-e NVIDIA_VISIBLE_DEVICES：指定物理机分配给 Docker 程序的 GPU 卡设备，常用可选值如下：\n"),a("ul",[a("li",[s._v("GPU-fef8089b 或 多个 UUID 逗号分隔：指定挂载具体 GPU 卡设备")]),s._v(" "),a("li",[s._v("all：指定挂载当前机器所有卡")])])])]),s._v(" "),a("h2",{attrs:{id:"gputil-python-组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gputil-python-组件"}},[s._v("#")]),s._v(" GPUtil Python 组件")]),s._v(" "),a("p",[s._v("GPUtil 是一个 Python 模块，支持 Python 2.X 和 3.X。用于在 Python 中以编程方式使用 nvidia-smi 从 NVIDA GPU 获取 GPU 状态。")]),s._v(" "),a("p",[s._v("可以通过 pip 命令进行直接"),a("code",[s._v("GPUtil 安装")]),a("sup",[s._v("[2]")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" GPUtil\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查询 GPU 当前的使用情况")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" GPUtil\nGPUtil.showUtilization"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("根据当前内存使用情况和负载确定的，自动选择合适的 GPU 卡")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("deviceIDs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" GPUtil.getAvailable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("order "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'first'")]),s._v(", limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", maxLoad "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v(", maxMemory "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("includeNan")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("False, "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("excludeID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("excludeUUID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("核心参数解释：")]),s._v(" "),a("ul",[a("li",[s._v("order：确定返回可用 GPU 设备 ID 的排序，具体如下：\n"),a("ul",[a("li",[s._v("first：按升序排列可用的 GPU 设备 ID（默认）")]),s._v(" "),a("li",[s._v("last：按降序排列可用的 GPU 设备 ID")]),s._v(" "),a("li",[s._v("random：随机订购可用的 GPU 设备 ID")]),s._v(" "),a("li",[s._v("load：按负载递增排序可用的 GPU 设备 ID")]),s._v(" "),a("li",[s._v("memory：通过升序内存使用来排序可用的 GPU 设备 ID")])])]),s._v(" "),a("li",[s._v("limit：将返回的 GPU 设备 ID 数量限制为指定数量，必须是正整数。（默认 = 1）")]),s._v(" "),a("li",[s._v("maxLoad：被认为可用的 GPU 的最大当前相对负载。负载大于 的 GPUmaxLoad不会返回。（默认 = 0.5）")]),s._v(" "),a("li",[s._v("maxMemory：被视为可用的 GPU 的最大当前相对内存使用量。maxMemory不返回当前内存使用量大于的 GPU 。（默认 = 0.5）")]),s._v(" "),a("li",[s._v("excludeID：ID 列表，应从可用 GPU 列表中排除。见GPU类描述。（默认 = []）")])]),s._v(" "),a("h2",{attrs:{id:"gpu-常用设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gpu-常用设置"}},[s._v("#")]),s._v(" GPU 常用设置")]),s._v(" "),a("h3",{attrs:{id:"一、启动模式设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、启动模式设置"}},[s._v("#")]),s._v(" 一、启动模式设置")]),s._v(" "),a("p",[s._v("针对 NVIDIA 首次运行启动加载慢，我们可以进行 "),a("code",[s._v("Persistence-M")]),s._v(" 持续模式设置，如下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" nvidia-smi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-pm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"二、节点分配设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、节点分配设置"}},[s._v("#")]),s._v(" 二、节点分配设置")]),s._v(" "),a("p",[s._v("针对四卡机器或多卡机器，偶尔会出现卡性能不均匀现象。一个纯野生小技巧，我们可以优先选用边界节点，边界卡槽有利于散热。")]),s._v(" "),a("h2",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[s._v("#")]),s._v(" References")]),s._v(" "),a("ul",[a("li",[s._v("[0] 三十一: https://www.lisanshiyi.com/assets/image/ThirtyOneLee.jpeg")]),s._v(" "),a("li",[s._v("[1] NVIDIA Management Library（NVML）: https://developer.nvidia.com/nvidia-system-management-interface")]),s._v(" "),a("li",[s._v("[2] GPUtil 安装: https://pypi.org/project/GPUtil/")])])])}),[],!1,null,null,null);a.default=e.exports}}]);